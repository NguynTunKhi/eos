{{from applications.eos.modules import const}}
{{from applications.eos.modules import common}}

<div class="row" style="margin-top: -25px;">
	<div class="clearfix"></div>
    <div class="col-lg-4" style="padding: 15px 20px;">
        <ul class="stat-list m-t-lg">
            <li class="row">
                <label class=" col-md-6" ><h3>{{=T('Total stations number')}}</h3></label>
                <h1 class="no-margins col-md-6 pull-right" style="text-align: right;">{{=total_station}}</h1>
            </li>
            <li>
                <!-- <h3 class="no-margins">{{#=total_offline}}</h3> -->
                <label class="station-status">{{=T('Disconnect stations')}}</label>
                {{percent_off = common.convert_data(100.00*total_offline/total_station) if total_station else 0}}
                <label class="pull-right station-status">{{='%s (%s%s)' % (total_offline, percent_off, '%')}}</label>
                <div class="progress progress-mini skill-bar">
                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="{{=percent_off}}" aria-valuemin="0" aria-valuemax="100" style="background: {{=station_status['OFFLINE']['color']}}">
                        <span class="skill"><i class="val"></i></span>
                    </div>
                </div>
            </li>
            <li>
                <label class="station-status">{{=T('Active stations number')}}</label>
                {{percent_active = common.convert_data(100.00*total_online/total_station) if total_station else 0}}
                <label class="pull-right station-status">{{='%s (%s%s)' % (total_online, percent_active, '%')}}</label>
                <div class="progress progress-mini skill-bar" >
                    <div class="progress-bar progress-bar-success" role="progressbar"
                        aria-valuenow="{{=percent_active}}" aria-valuemin="0" aria-valuemax="100" style="background: {{=station_status['GOOD']['color']}}">
                        <span class="skill"><i class="val"></i></span>
                    </div>
                </div>
            </li>
            <li>
                <!-- <h3 class="no-margins">{{#=total_offline}}</h3> -->
                <label class="station-status" style="margin-left:20px">{{=T('Good stations')}}</label>
                {{percent_err = common.convert_data(100.00*total_good/total_station) if total_station else 0}}
                <label class="pull-right station-status">{{='%s (%s%s)' % (total_good, percent_err, '%')}}</label>
                <div class="progress progress-mini skill-bar" style="margin-left:20px">
                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="{{=percent_err}}" aria-valuemin="0" aria-valuemax="100" style="background: {{=station_status['GOOD']['color']}}">
                        <span class="skill"><i class="val"></i></span>
                    </div>
                </div>
            </li>
            <li>
                <!-- <h3 class="no-margins">{{#=total_offline}}</h3> -->
                <label class="station-status" style="margin-left:20px">{{=T('Exceed stations')}}</label>
                {{percent_err = common.convert_data(100.00*total_exceed/total_station) if total_station else 0}}
                <label class="pull-right station-status">{{='%s (%s%s)' % (total_exceed, percent_err, '%')}}</label>
                <div class="progress progress-mini skill-bar" style="margin-left:20px">
                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="{{=percent_err}}" aria-valuemin="0" aria-valuemax="100" style="background: {{=station_status['EXCEED']['color']}}">
                        <span class="skill"><i class="val"></i></span>
                    </div>
                </div>
            </li>
            <li>
                <!-- <h3 class="no-margins">{{#=total_offline}}</h3> -->
                <label class="station-status" style="margin-left:20px">{{=T('Sensor error stations')}}</label>
                {{percent_err = common.convert_data(100.00*total_error/total_station) if total_station else 0}}
                <label class="pull-right station-status">{{='%s (%s%s)' % (total_error, percent_err, '%')}}</label>
                <div class="progress progress-mini skill-bar" style="margin-left:20px">
                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="{{=percent_err}}" aria-valuemin="0" aria-valuemax="100" style="background: {{=station_status['ERROR']['color']}}">
                        <span class="skill"><i class="val"></i></span>
                    </div>
                </div>
            </li>
            <li>
                <!-- <h3 class="no-margins">{{#=total_adjust}}</h3> -->
                <label class="station-status" style="margin-left:20px">{{=T('Adjusting stations')}}</label>
                {{percent_adjust = common.convert_data(100.00*total_adjust/total_station) if total_station else 0}}
                <label class="pull-right station-status">{{='%s (%s%s)' % (total_adjust, percent_adjust, '%')}}</label>
                <div class="progress progress-mini skill-bar" style="margin-left:20px">
                    <div class="progress-bar" style="background: purple" role="progressbar" aria-valuenow="{{=percent_adjust}}" aria-valuemin="0" aria-valuemax="100" style="background: {{=station_status['ADJUSTING']['color']}} >
                        <span class="skill"><i class="val"></i></span>
                    </div>
                </div>
            </li>

<!--            <div class="hr-line-dashed"></div>-->
            <br>
                {{item = 'TENDENCY'}}
                {{item2 = 'PREPARING'}}
                {{item3 = 'GOOD'}}
                {{item4 = 'ADJUSTING'}}
                {{item5 = 'EXCEED'}}
                {{item6 = 'ERROR'}}
                {{total = station_status[item]['qty'] + station_status[item2]['qty'] + station_status[item3]['qty'] + station_status[item4]['qty'] + station_status[item5]['qty'] + station_status[item6]['qty']}}
<!--             <li class="row">-->
<!--&lt;!&ndash;                <h3 class="no-margins">{{=T('Indicators status')}}</h3>&ndash;&gt;-->
<!--                <label class=" col-md-6" ><h3>{{=T('Total indicators status')}}</h3></label>-->
<!--                <h1 class="no-margins col-md-6 pull-right" style="text-align: right;">{{=total}}</h1>-->
<!--            </li>-->
<!--            <li>-->
<!--                &lt;!&ndash; <h3 class="no-margins">{{#=station_status[item]['qty'] + station_status[item2]['qty']}}</h3> &ndash;&gt;-->
<!--                <label class="station-status">{{=T('Good condition')}}</label>-->
<!--                {{percent_good = '%0.2f' %(100.00*(station_status[item]['qty'] + station_status[item2]['qty'] + station_status[item3]['qty'])/total) if total else 0}}-->
<!--                <label class="pull-right station-status">{{='%s (%s%s)' % (station_status[item]['qty'] + station_status[item2]['qty'] + station_status[item3]['qty'], percent_good, '%')}}</label>-->
<!--                <div class="progress progress-mini skill-bar">-->
<!--                    <div class="progress-bar" role="progressbar  progress-bar-info"  style="background: {{=station_status[item3]['color']}}"-->
<!--                        aria-valuenow="{{=percent_good}}" aria-valuemin="0" aria-valuemax="100">-->
<!--                        <span class="skill"><i class="val"></i></span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->
<!--            <li>-->
<!--                {{item = 'EXCEED'}}-->
<!--                &lt;!&ndash; <h3 class="no-margins">{{#=station_status[item]['qty']}}</h3> &ndash;&gt;-->
<!--                <label class="station-status">{{=T('Exceed condition')}}</label>-->
<!--                {{percent_exceed = '%0.2f' %(100.00*station_status[item]['qty']/total) if total else 0}}-->
<!--                <label class="pull-right station-status">{{='%s (%s%s)' % (station_status[item]['qty'], percent_exceed, '%')}}</label>-->
<!--                <div class="progress progress-mini skill-bar">-->
<!--                    <div class="progress-bar " role="progressbar" style="background: {{=station_status[item]['color']}}"-->
<!--                        aria-valuenow="{{=percent_exceed}}" aria-valuemin="0" aria-valuemax="100">-->
<!--                        <span class="skill"><i class="val"></i></span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->
<!--            <li>-->
<!--                {{item = 'ERROR'}}-->
<!--                &lt;!&ndash; <h3 class="no-margins">{{#=station_status[item]['qty']}}</h3> &ndash;&gt;-->
<!--                <label class="station-status">{{=T('Error condition')}}</label>-->
<!--                {{percent_exceed = '%0.2f' %(100.00*station_status[item]['qty']/total) if total else 0}}-->
<!--                <label class="pull-right station-status">{{='%s (%s%s)' % (station_status[item]['qty'], percent_exceed, '%')}}</label>-->
<!--                <div class="progress progress-mini skill-bar">-->
<!--                    <div class="progress-bar " role="progressbar" style="background: {{=station_status[item]['color']}}"-->
<!--                        aria-valuenow="{{=percent_exceed}}" aria-valuemin="0" aria-valuemax="100">-->
<!--                        <span class="skill"><i class="val"></i></span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->
<!--            <li>-->
<!--                {{item = 'ADJUSTING'}}-->
<!--                &lt;!&ndash; <h3 class="no-margins">{{#=station_status[item]['qty']}}</h3> &ndash;&gt;-->
<!--                <label class="station-status">{{=T('Adjust condition')}}</label>-->
<!--                {{percent_exceed = '%0.2f' %(100.00*station_status[item]['qty']/total) if total else 0}}-->
<!--                <label class="pull-right station-status">{{='%s (%s%s)' % (station_status[item]['qty'], percent_exceed, '%')}}</label>-->
<!--                <div class="progress progress-mini skill-bar">-->
<!--                    <div class="progress-bar " role="progressbar" style="background: {{=station_status[item]['color']}}"-->
<!--                        aria-valuenow="{{=percent_exceed}}" aria-valuemin="0" aria-valuemax="100">-->
<!--                        <span class="skill"><i class="val"></i></span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->
        </ul>
    </div>
    <div class="col-md-4" style="padding: 15px 20px;">
        <div class="row">
            <div class="ibox float-e-margins">
                <div class="ibox-title" style="padding: 5px 0px; border:0px">
                    <div class="row no-borders no-margins">
                        <div class="col-sm-5" style="padding-right: 0px;">
                            <select class="form-control m-b" name="status" id="scs1_status" data-forDT="scs1" style="margin-bottom: 0px;">
                                <option value="">{{=T('-- Select status --')}}</option>
                                <option value="1">{{=T('Exceed condition')}}</option>
                                <option value="2">{{=T('Good condition')}}</option>
                            </select>
                        </div>
                        <div class="col-sm-7">
                            <div class="input-group">
                                <input type="text" class="form-control" id="scs_sometext" data-forDT="scs1" name="sometext" placeholder="{{=T('Station name')}}" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary" id="btn_scs1_search">{{=T('Go!')}}</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ibox-content no-margins" style="padding-top: 0px">
                    <table class='table table-striped no-margins'>
                        <thead>
                            <tr>
                                <th style="width:70%; text-align:left">{{=T('Stations in operation')}}</th>
                                <th style="width:30%">{{=T('Status')}}</th>
                            </tr>
                        </thead>
                    </table>
                    <div class="no-margins">
                        <div class="scroll_scs1" >
                            <table id='custom_datatable_scs1' class='table table-striped table-hover table-responsive'
                                data-url="{{=URL('call/json/get_station_online')}}" >
                                <thead class="hide">
                                    <tr><th>{{=T('Station')}}</th><th>{{=T('Status')}}</th></tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4" style="padding: 15px 20px;">
        <div class="row">
            <div class="ibox float-e-margins">
                <div class="ibox-title" style="padding: 5px 0px; border:0px">
                    <div class="row no-borders no-margins">
                        <div class="col-sm-5" style="padding-right: 0px;">
                            <select class="form-control m-b" name="condition" id="scs2_condition" data-forDT="scs2" style="margin-bottom: 0px;">
                                <option value="">{{=T('-- Select status --')}}</option>
                                <option value="6">{{=T('Equipment error')}}</option>
                                <option value="5">{{=T('Adjusting')}}</option>
                                <option value="4">{{=T('Disconnect')}}</option>
                            </select>
                        </div>
                        <div class="col-sm-7">
                            <div class="input-group">
                                <input type="text" class="form-control" id="scs2_sometext" data-forDT="scs2" name="sometext" placeholder="{{=T('Station name')}}" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary" id="btn_scs2_search">{{=T('Go!')}}</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ibox-content no-margins" style="padding-top: 0px">
                    <table class='table table-striped no-margins'>
                        <thead>
                            <tr>
                                <th style="width:70%; text-align:left">{{=T('Stations in-active')}}</th>
                                <th style="width:30%">{{=T('Status')}}</th>
                            </tr>
                        </thead>
                    </table>
                    <div class="no-margins">
                        <div class="scroll_scs2">
                            <table id='custom_datatable_scs2' class='table table-striped table-hover table-responsive'
                                data-url="{{=URL('call/json/get_station_offline')}}">
                                <thead class="hide">
                                    <tr><th>{{=T('Station')}}</th><th>{{=T('Status')}}</th></tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="{{=URL('static', 'views/' + response.view.replace('.html', '.js'))}}"></script>


